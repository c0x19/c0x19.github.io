<!DOCTYPE html>



  


<html class="theme-next muse use-motion" lang="">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>
<meta name="theme-color" content="#222">









<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />
















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />







<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.1.4" rel="stylesheet" type="text/css" />


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=5.1.4">


  <link rel="mask-icon" href="/images/logo.svg?v=5.1.4" color="#222">





  <meta name="keywords" content="Hexo, NexT" />










<meta name="description" content="恭喜达拉斯独行侠队获得2020年NBA总冠军">
<meta property="og:type" content="website">
<meta property="og:title" content="c0x19">
<meta property="og:url" content="http://yoursite.com/page/2/index.html">
<meta property="og:site_name" content="c0x19">
<meta property="og:description" content="恭喜达拉斯独行侠队获得2020年NBA总冠军">
<meta property="og:locale" content="default">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="c0x19">
<meta name="twitter:description" content="恭喜达拉斯独行侠队获得2020年NBA总冠军">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Muse',
    version: '5.1.4',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    duoshuo: {
      userId: '0',
      author: 'Author'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://yoursite.com/page/2/"/>





  <title>c0x19</title>
  








</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="default">

  
  
    
  

  <div class="container sidebar-position-left 
  page-home">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/"  class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">c0x19</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle"></p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            Home
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            Archives
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/03/30/ssh配置/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="忖度">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="c0x19">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/03/30/ssh配置/" itemprop="url">ssh配置</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2019-03-30T15:31:11+08:00">
                2019-03-30
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>因为要搞ssh渗透，学习和配置一下ssh服务，环境是两个虚拟机，靶机ubuntu18.04，客户端kali</p>
<h1 id="ssh服务端配置"><a href="#ssh服务端配置" class="headerlink" title="ssh服务端配置"></a>ssh服务端配置</h1><hr>
<p>在作为服务端的虚拟机ubuntu18.04上配置ssh server</p>
<h2 id="安装ssh-server"><a href="#安装ssh-server" class="headerlink" title="安装ssh server"></a>安装ssh server</h2><p><code>sudo apt-get install openssh-server</code></p>
<h2 id="查看并开启服务"><a href="#查看并开启服务" class="headerlink" title="查看并开启服务"></a>查看并开启服务</h2><p>安装完成后，ssh服务默认是开启的，下面是对服务的一些操作</p>
<ul>
<li><p>查看状态：<code>sudo serivce ssh status</code></p>
</li>
<li><p>开启：<code>sudo service ssh start</code></p>
</li>
<li><p>停止：<code>sudo service ssh stop</code></p>
</li>
<li><p>重启：<code>sudo service ssh restart</code></p>
</li>
</ul>
<h2 id="开启root密码登录"><a href="#开启root密码登录" class="headerlink" title="开启root密码登录"></a>开启root密码登录</h2><ol>
<li><p><code>vim /etc/ssh/sshd_config</code></p>
</li>
<li><p>找到PermitRootLogin，将键值改成yes，并把该行注释符删掉</p>
</li>
<li><p>找到passwordAuthentication，将键值改成yes</p>
</li>
<li><p>重启ssh服务 <code>service ssh restart</code></p>
</li>
</ol>
<h2 id="修改端口号"><a href="#修改端口号" class="headerlink" title="修改端口号"></a>修改端口号</h2><p>防止被轻易找到默认端口22，修改端口号</p>
<ol>
<li><p>打开配置文件 <code>sudo vim /etc/ssh/sshd_config</code></p>
<p> 找到<code>#port 22</code>这一行，在这一行下面加一句，即你要修改的端口号，如<code>port 9625</code>，并将上面port 22的注释删掉（防止失败后无法连接，测试成功再加上注释），保存修改</p>
</li>
<li><p>重启服务 <code>sudo service ssh restart</code></p>
</li>
</ol>
<h1 id="ssh客户端访问"><a href="#ssh客户端访问" class="headerlink" title="ssh客户端访问"></a>ssh客户端访问</h1><hr>
<p>ssh命令格式：<code>ssh user@IP -p port</code></p>
<p>本地测试 <code>ssh nik@localhost -p 9625</code></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/03/28/nmap/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="忖度">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="c0x19">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/03/28/nmap/" itemprop="url">nmap</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2019-03-28T23:11:52+08:00">
                2019-03-28
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>namp嗅探扫描神器，渗透必备，下面通过渗透过程来介绍nmap常用的用法</p>
<h1 id="发现主机"><a href="#发现主机" class="headerlink" title="发现主机"></a>发现主机</h1><p>通过扫描整个子网来发现主机，所以要先找到子网的IP段</p>
<p>windows：<code>ipconfig</code></p>
<p>linux： <code>ifconfig</code></p>
<p>可以查看本机的IP地址、网关的IP地址、子网掩码</p>
<p>通过子网掩码可以知道IP地址前缀，如255.255.255.0即为24，若网关IP为192.168.1.1，则<strong>扫描整个子网</strong>命令：</p>
<p><code>nmap 192.168.1.1/24</code></p>
<p>也可以<strong>扫描指定的主机</strong></p>
<ul>
<li><code>nmap 192.168.1.101</code></li>
<li><code>nmap 192.168.101 192.168.1.102</code></li>
<li><code>namp 192.168.1.100-200</code></li>
<li><code>nmap -iL target.txt</code> （targe.txt存储IP地址列表）</li>
</ul>
<p>主机发现也叫做ping扫描，但不只是简单的发送ICMP回声请求报文，可以指定参数<code>-P&lt;C&gt;</code>来选择ping的类型(即使指定ping类型，ARP发现-PR对局域网还是默认有的，因为又快又有效)</p>
<p><strong>控制主机发现的参数：</strong></p>
<ul>
<li><p>-sL(列表扫描)：仅仅列出指定网络上的主机，不发送报文</p>
</li>
<li><p>-sP(ping扫描)：仅仅进行ping扫描，打印出回应的主机</p>
</li>
<li><p>-P0(无ping)：nmap默认只对运行的主机进行扫描，-P0会对每一个指定的IP地址进行扫描</p>
</li>
<li><p>-PS(TCP SYN Ping)：发送设置了SYN标志位的空TCP报文</p>
</li>
<li><p>-PA(TCP ACK Ping)：设置ACK位</p>
</li>
<li><p>-PU(UDP Ping)：发送UDP报文，可以穿过只对TCP过滤的防火墙</p>
</li>
<li><p>-PR(ARP Ping)：<strong>默认用的扫描方式</strong>，局域网好用</p>
</li>
</ul>
<h1 id="扫描端口"><a href="#扫描端口" class="headerlink" title="扫描端口"></a>扫描端口</h1><p>发现要扫描的主机后，可以针对单个主机进行扫描,端口扫描格式为<code>namp -s&lt;C&gt;</code></p>
<ul>
<li><p>-sS(TCP SYN扫描)：半开放扫描，发送SYN报文，不容易被注意到，是<strong>默认扫描方式</strong></p>
</li>
<li><p>-sT(TCP connect()扫描)：全连接扫描，仅当SYN不行时使用一下，慢</p>
</li>
<li><p>-sU(UDP扫描)：扫描UDP服务，较慢，可以搭配TCP扫描一起用</p>
</li>
<li><p>-sA(TCP ACK扫描)：不发现端口情况，用于发现防火墙规则</p>
</li>
<li><p>-scanflags(定制TCP扫描)：定制报文标志位，巧妙绕过入侵检测</p>
</li>
<li><p>-sI：高级扫描，盲扫描，没有报文从自己的真实IP发送，机端隐蔽！</p>
</li>
</ul>
<h1 id="服务和版本探测"><a href="#服务和版本探测" class="headerlink" title="服务和版本探测"></a>服务和版本探测</h1><p><code>-sV</code>参数用来版本探测，其他暂时不学</p>
<h1 id="操作系统探测"><a href="#操作系统探测" class="headerlink" title="操作系统探测"></a>操作系统探测</h1><p><code>-O</code> 启用操作系统检测(大写英文字母O)</p>
<h1 id="输出"><a href="#输出" class="headerlink" title="输出"></a>输出</h1><ul>
<li>-oN：标准输出，后接文件名</li>
<li>-oX：XML输出</li>
</ul>
<h1 id="其他参数"><a href="#其他参数" class="headerlink" title="其他参数"></a>其他参数</h1><ul>
<li>-v：显示扫描过程细节</li>
<li>-T4：时间选项，T后面接数字，默认是T3，T4可以更快</li>
</ul>
<h1 id="究极扫描"><a href="#究极扫描" class="headerlink" title="究极扫描!"></a>究极扫描!</h1><p><code>nmap -A</code></p>
<p>全面扫描，包括-O和-sV，忘记参数或者不懂的时候-A就完事了</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/03/28/linux命令-3-iwlist/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="忖度">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="c0x19">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/03/28/linux命令-3-iwlist/" itemprop="url">linux命令-3-iwlist</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2019-03-28T15:06:28+08:00">
                2019-03-28
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>iwlist命令利用无线网卡进行无线AP的检测与取得相关的数据</p>
<p>AP：WirelessAcessPoint，无线访问接入点，就是传统网络中的HUB，起到中继和桥接的作用。无线路由器就是无线AP+路由功能</p>
<h1 id="功能"><a href="#功能" class="headerlink" title="功能"></a>功能</h1><h2 id="扫描可用的无线网络"><a href="#扫描可用的无线网络" class="headerlink" title="扫描可用的无线网络"></a>扫描可用的无线网络</h2><ol>
<li><p>找到可用的无线网卡 <code>iwconfig</code></p>
</li>
<li><p>一般无线网卡为wlan0，激活开启网卡 <code>ifconfig wlan0 up</code></p>
</li>
<li><p>扫描网络，<code>iwlist wlan0 scan</code>，其中scan为scanning简写，两种写法都可以</p>
</li>
</ol>
<h2 id="显示频道信息"><a href="#显示频道信息" class="headerlink" title="显示频道信息"></a>显示频道信息</h2><p><code>iwlist wlan0 frequen</code></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/03/28/linux命令-2-iwconfig/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="忖度">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="c0x19">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/03/28/linux命令-2-iwconfig/" itemprop="url">linux命令-2-iwconfig</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2019-03-28T13:54:26+08:00">
                2019-03-28
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>iwconfig专门用来查看配置无线网络设备信息，相比ifconfig，参数更偏向无线信息</p>
<h1 id="命令格式"><a href="#命令格式" class="headerlink" title="命令格式"></a>命令格式</h1><p><code>iwconfig [网络设备] [参数]</code></p>
<h1 id="常用功能-参数"><a href="#常用功能-参数" class="headerlink" title="常用功能/参数"></a>常用功能/参数</h1><p>暂时不用</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/03/28/linux命令-1-ifconfig/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="忖度">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="c0x19">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/03/28/linux命令-1-ifconfig/" itemprop="url">linux命令-1-ifconfig</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2019-03-28T13:30:13+08:00">
                2019-03-28
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>ifconfig可以查看并修改网络设备参数</p>
<h1 id="命令格式"><a href="#命令格式" class="headerlink" title="命令格式"></a>命令格式</h1><p><code>ifconfig [网络设备] [参数]</code></p>
<h1 id="常用功能参数"><a href="#常用功能参数" class="headerlink" title="常用功能参数"></a>常用功能参数</h1><ul>
<li><p>up：启动指定网络设备/网卡 <code>ifconfig eth0 up</code></p>
</li>
<li><p>down: 关闭指定网络设备/网卡 <code>ifconfig eth0 down</code></p>
</li>
<li><p>arp： 设置指定网卡是否支持ARP协议 </p>
<ul>
<li>启用ARP协议 <code>ifconfig eth0 arp</code></li>
<li>关闭ARP协议 <code>ifconfig eth0 -arp</code></li>
</ul>
</li>
<li><p>-a： 显示全部接口信息 <code>ifconfig -a</code></p>
</li>
<li><p>配置ip地址： 给eth0网卡设置ip为192.168.1.100 <code>ifconfig eth0 192.168.1.100</code></p>
</li>
</ul>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/01/14/python实现贴吧自动签到/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="忖度">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="c0x19">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/01/14/python实现贴吧自动签到/" itemprop="url">python实现贴吧自动签到</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2019-01-14T20:31:13+08:00">
                2019-01-14
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>前面学urllib，学cookie，学re，都是为了这个小脚本，结果用urllib获取关注的贴吧列表时，发送请求会有个重定向，导致重定向后没有cookie，也就得到一个空列表，本以为requests库以urllib为基础建立，urllib应该更强大一点，特地系统学了学，结果还不如老老实实用requests库，requests库处理爬虫是真的厉害</p>
<h1 id="签到的请求"><a href="#签到的请求" class="headerlink" title="签到的请求"></a>签到的请求</h1><hr>
<p>打开一个贴吧签到页面，在签到前，F12，然后点击签到，即可得到签到时发送的请求，点击Network，要的是request请求，筛选XHR，有个add请求，明显就是我们要找的</p>
<p><img src="https://i.imgur.com/6gxAuD3.png" alt=""></p>
<p>得到了请求的url <code>http://tieba.baidu.com/sign/add</code></p>
<p>方法是POST，即还有参数，往下看，发现了参数格式</p>
<p><img src="https://i.imgur.com/6KYGbCE.png" alt=""></p>
<p>tbs可以复用，即每个贴吧可以共用，现在只需要得到所有贴吧的名字，然后做好对应的data，post发送即可，cookie后面获取名字时再弄，毕竟先弄好名字列表，才能签到</p>
<h1 id="获取关注的贴吧列表"><a href="#获取关注的贴吧列表" class="headerlink" title="获取关注的贴吧列表"></a>获取关注的贴吧列表</h1><hr>
<p>从贴吧里找到我的贴吧界面<br><img src="https://i.imgur.com/NsCxF09.png" alt=""></p>
<p>用F12打开后，点击Network，按一下F5重新加载一下网页，得到一堆结果，我们要的是request请求，筛选选择XHR后就简单多了</p>
<p><img src="https://i.imgur.com/2V8If2H.png" alt=""></p>
<p>发现有个mylike请求，双击点开发现正是关注贴吧的列表</p>
<p>具体看一下该请求</p>
<p><img src="https://i.imgur.com/oGDhEPF.png" alt=""></p>
<p>得到了请求的url为  <code>http://tieba.baidu.com/f/like/mylike?v=1547438620259</code></p>
<p>请求方法为 GET</p>
<p>下面也有请求头部的信息，里面包含了cookie，不管那么多，直接全部复制头部信息，进入python代码里，处理只需加一下单引号和逗号就能构造好带有自己cookie的头部</p>
<p><img src="https://i.imgur.com/GbthU4A.png" alt=""></p>
<p>代码里的头部构造，复制过来后修改的地方非常少，看着很花里胡哨，其实很省心</p>
<p><img src="https://i.imgur.com/srwvyeV.png" alt=""></p>
<p>这里请求贴吧列表时有个重定向，用urllib中的opener不行，这里用requests的Session来处理，即可重定向时照样保存cookie信息</p>
<pre><code>like_url = &apos;http://tieba.baidu.com/f/like/mylike?v=1547424142305&apos;
s = requests.Session()
html = s.get(like_url, headers=head)
html = html.content.decode(&apos;gbk&apos;)
</code></pre><p>用正则表达式来从网页源码中找到关注贴吧的名字</p>
<pre><code>p = re.compile(r&apos;title=&quot;(.+?)&quot;&gt;\1&lt;/a&gt;&lt;/td&gt;&apos;)
like_result += p.findall(html)
</code></pre><p>具体正则怎么写，慢慢看网页元素，找对应名字所在字符串的模式</p>
<h1 id="签到"><a href="#签到" class="headerlink" title="签到"></a>签到</h1><hr>
<p>思路简单，代码也简单，直接上代码</p>
<pre><code>import requests
import urllib.error
import re

head = {
    &apos;Accept&apos;: &apos;text/html, */*; q=0.01&apos;,
    &apos;Accept-Encoding&apos;: &apos;gzip, deflate&apos;,
    &apos;Accept-Language&apos;: &apos;zh-CN,zh;q=0.9,en;q=0.8&apos;,
    &apos;Connection&apos;: &apos;keep-alive&apos;,
    &apos;Cookie&apos;: &apos;BAIDUID=6DBDEEF7FB3A324BC86AC949E15E20:FG=1; BIDUPSID=6DBDEEF7FB3A324B34C86AC949E15E20; &apos;
          &apos;PSTM=1547101880; BDORZ=B490B5EBF6F3CD402E515D22BCDA1598; TIEBA_USERTYPE=9c139eef6f78a9429a629ca7; &apos;
          &apos;bdshare_firstime=1547105555949; &apos;
              &apos;BDUSS=kp5ZTRaeE9AAEAAAA6218rx&apos;
          &apos;-DGu7n7zrbEzMzHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFwyO1xcMjtcN; &apos;
          &apos;TIEBAUID=04e88654c6a4bf37b1a22cf8; &apos;
          &apos;STOKEN=0d161708b5a11e3029cca3d3b7a9fa5b4f9ccb486475ab12c3a8b; &apos;
          &apos;H_PS_PSSID=1442_21119_28132_28267; Hm_lvt_98b9d8c2fd6608d564bf2ac2ae642948=1547417142,1547419494,&apos;
          &apos;1547419533,1547424956; delPer=0; PSINO=5; &apos;
          &apos;PMS_JT=%28%7B%22s%22%3A1547425493177%2C%22r%22%3A%22http%3A//tieba.baidu.com/home/main%3Fun%3D%25E9&apos;
          &apos;%259D%2592%25E8%258B%25B9%25E6%259E%259C%25E5%2591%25B3%25E5%25A5%25B6%25E7%25B3%2596%26fr%3Dibaidu&apos;
          &apos;%26ie%3Dutf-8%22%7D%29; Hm_lpvt_98b9d8c2fd6608d564bf2ac2ae642948=1547425494&apos;,
    &apos;Host&apos;: &apos;tieba.baidu.com&apos;,
    &apos;Referer&apos;: &apos;http://tieba.baidu.com/i/i/forum&apos;,
    &apos;User-Agent&apos;: &apos;Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) &apos;
              &apos;Chrome/71.0.3578.98 Safari/537.36&apos;,
    &apos;X-Requested-With&apos;: &apos;XMLHttpRequest&apos;
}

like_url = &apos;http://tieba.baidu.com/f/like/mylike?v=1547424142305&apos;
sign_url = &apos;http://tieba.baidu.com/sign/add&apos;
tbs = &apos;4fb45fea4498360d1547435295&apos;

like_result = []
try:
    s = requests.Session()
    html = s.get(like_url, headers=head)
    html = html.content.decode(&apos;gbk&apos;)
    p = re.compile(r&apos;title=&quot;(.+?)&quot;&gt;\1&lt;/a&gt;&lt;/td&gt;&apos;)
    like_result += p.findall(html)
except urllib.error.HTTPError as e:
    print(e.reason)

for name in like_result:
    data = {
        &apos;ie&apos;: &apos;utf-8&apos;,
        &apos;kw&apos;: name,
        &apos;tbs&apos;: tbs
    }
    try:
        r = requests.post(sign_url, data=data, headers=head)
    except urllib.error.HTTPError as e:
        print(e.reason)
</code></pre><p>cookie已悄悄修改，防止泄露 :(</p>
<p>放到自己的服务器上，用crontab来定时任务</p>
<p><code>crontab -e</code></p>
<p>设置每天6点执行该签到脚本，在里面加入这句话</p>
<p><code>0 6 * * * python3 /root/python/tieba/sign.py</code></p>
<p>保存退出</p>
<p>搞定，日后在搞输出签到日志</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/01/13/python正则表达式/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="忖度">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="c0x19">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/01/13/python正则表达式/" itemprop="url">python正则表达式</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2019-01-13T22:55:11+08:00">
                2019-01-13
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>python中正则表达式用re库</p>
<h1 id="pattern"><a href="#pattern" class="headerlink" title="pattern"></a>pattern</h1><hr>
<p>pattern是正则中的模式字符串，代表了要匹配的规则</p>
<h2 id="元字符"><a href="#元字符" class="headerlink" title="元字符"></a>元字符</h2><table>
<thead>
<tr>
<th>字符</th>
<th style="text-align:center">含义</th>
</tr>
</thead>
<tbody>
<tr>
<td>.</td>
<td style="text-align:center">匹配任意一个字符，除了”\n”</td>
</tr>
<tr>
<td>\</td>
<td style="text-align:center">转义字符，使后面的特殊字符变成普通字符，使普通字符变成特殊字符</td>
</tr>
<tr>
<td>*</td>
<td style="text-align:center">匹配前一个字符0次或多次</td>
</tr>
<tr>
<td>+</td>
<td style="text-align:center">匹配前一个字符1次或多次</td>
</tr>
<tr>
<td>?</td>
<td style="text-align:center">匹配前一个字符0次或1次</td>
</tr>
<tr>
<td>^</td>
<td style="text-align:center">匹配字符串开头，在多行模式中匹配每一行的开头</td>
</tr>
<tr>
<td>$</td>
<td style="text-align:center">匹配字符串结尾，在多行模式下匹配每一行的结尾</td>
</tr>
<tr>
<td><code>&#124;</code></td>
<td style="text-align:center">匹配左右表达式中的任意一个</td>
</tr>
<tr>
<td>{}</td>
<td style="text-align:center">{m}匹配前一个字符m次，{m,n}匹配前一个字符m到n次，n不写代表无限次</td>
</tr>
<tr>
<td>[]</td>
<td style="text-align:center">匹配字符集中的任意一个字符，[abc]即abc中任意一个，[a-z]即a-z  26个字母中任意一个，[^abc]代表所有字符中除去abc的任意一个字符</td>
</tr>
<tr>
<td>()</td>
<td style="text-align:center">分组，里面是一个整体pattern，和算术中()一样优先处理，然后结果返回出来，从左开始数（按左括号计数）编号为1</td>
</tr>
</tbody>
</table>
<h2 id="预定义字符集"><a href="#预定义字符集" class="headerlink" title="预定义字符集"></a>预定义字符集</h2><table>
<thead>
<tr>
<th>字符</th>
<th style="text-align:center">含义</th>
</tr>
</thead>
<tbody>
<tr>
<td>\d</td>
<td style="text-align:center">数字</td>
</tr>
<tr>
<td>\D</td>
<td style="text-align:center">非数字</td>
</tr>
<tr>
<td>\s</td>
<td style="text-align:center">空白字符</td>
</tr>
<tr>
<td>\S</td>
<td style="text-align:center">非空白字符</td>
</tr>
<tr>
<td>\w</td>
<td style="text-align:center">包括下划线在内的任何字符</td>
</tr>
<tr>
<td>\W</td>
<td style="text-align:center">特殊字符，即非字母字符</td>
</tr>
<tr>
<td>\A</td>
<td style="text-align:center">仅匹配字符串开头，同^</td>
</tr>
<tr>
<td>\z</td>
<td style="text-align:center">仅匹配字符串结尾，同$</td>
</tr>
<tr>
<td>\b</td>
<td style="text-align:center">匹配位于单词开始或结束位置的空字符串</td>
</tr>
<tr>
<td>\数字</td>
<td style="text-align:center">匹配索引对应分组捕获到的内容一样的字符串</td>
</tr>
</tbody>
</table>
<h1 id="标志"><a href="#标志" class="headerlink" title="标志"></a>标志</h1><hr>
<p>在调用函数时，有个可选的参数flag，代表了一些规则</p>
<table>
<thead>
<tr>
<th>标志</th>
<th style="text-align:center">含义</th>
</tr>
</thead>
<tbody>
<tr>
<td>re.I</td>
<td style="text-align:center">使匹配忽略大小写</td>
</tr>
<tr>
<td>re.S</td>
<td style="text-align:center">使.匹配包括”\n”在内的所有字符</td>
</tr>
<tr>
<td>re.M</td>
<td style="text-align:center">多行匹配，影响^和$</td>
</tr>
</tbody>
</table>
<h1 id="re库中的函数"><a href="#re库中的函数" class="headerlink" title="re库中的函数"></a>re库中的函数</h1><hr>
<h2 id="re-compile"><a href="#re-compile" class="headerlink" title="re.compile()"></a>re.compile()</h2><ul>
<li>作用：预编译正则表达式pattern，返回一个正则表达式对象，当多次使用该表达式时，这样可以提高性能</li>
<li>参数<ul>
<li>pattern：正则表达式</li>
<li>flag：可选参数</li>
</ul>
</li>
</ul>
<ul>
<li>返回对象：正则表达式对象</li>
<li>返回对象的方法：下面介绍的所有函数都可以被该对象调用，调用时函数中的pattern参数就不用写了</li>
</ul>
<h2 id="re-match"><a href="#re-match" class="headerlink" title="re.match()"></a>re.match()</h2><ul>
<li><p>作用：从字符串最开始与pattern匹配，开始不匹配直接失败，返回None，成功返回匹配对象，是一个match对象</p>
</li>
<li><p>参数</p>
<ul>
<li>pattern：正则表达式，可以是字符串，也可以是re.compile()产生的正则表达式对象</li>
<li>string：待匹配的字符串</li>
<li>flag：可选参数</li>
</ul>
</li>
</ul>
<ul>
<li><p>返回值：match对象</p>
</li>
<li><p>match对象的属性</p>
<ul>
<li>match对象自带布尔值，表示匹配成功与否</li>
<li>string：待匹配的文本</li>
<li>re：匹配时使用的pattern对象，即正则表达式</li>
<li>pos：正则表达式搜索文本的开始位置</li>
<li>endpos：正则表达式搜索文本的结束文章</li>
</ul>
</li>
<li><p>match对象的方法</p>
<ul>
<li>group(num=0)：返回match对象中匹配到的字符串结果，参数默认是0，即返回全部字符串，也可加入数字，返回匹配pattern中的对应分组结果的字符串</li>
<li>groups(default=None)：返回包含所有匹配子组的元组</li>
<li>start()：返回匹配结果在查找字符串中开始的位置</li>
<li>end()：返回匹配结果在查找字符串中结束的位置</li>
<li>span()：返回一个位置元组(开始，结束)，即上面两个函数形成一个元组</li>
</ul>
</li>
</ul>
<h2 id="re-search"><a href="#re-search" class="headerlink" title="re.search()"></a>re.search()</h2><ul>
<li><p>作用：与match()只从头匹配不同，是从任意位置查找第一次匹配的内容，失败返回None，成功返回一个match对象</p>
</li>
<li><p>参数</p>
<ul>
<li>pattern：正则表达式</li>
<li>string：待匹配的字符串</li>
<li>flag：可选参数</li>
</ul>
</li>
<li><p>返回值：match对象,该对象参考match()函数介绍</p>
</li>
</ul>
<h2 id="re-findall"><a href="#re-findall" class="headerlink" title="re.findall()"></a>re.findall()</h2><ul>
<li><p>作用：查找所有(非重复)匹配正则表达式的结果</p>
</li>
<li><p>参数</p>
<ul>
<li>pattern：正则表达式</li>
<li>string：待匹配的字符串</li>
<li>flag：可选参数</li>
</ul>
</li>
<li><p>返回值：一个包括所有匹配字符串结果的list</p>
</li>
</ul>
<h2 id="re-finditer"><a href="#re-finditer" class="headerlink" title="re.finditer()"></a>re.finditer()</h2><ul>
<li><p>作用：搜索字符串，返回一个匹配结果的迭代器，每个元素是match对象，即相当于search()函数不停执行，把每次得到的match对象合起来返回一个迭代器</p>
</li>
<li><p>参数</p>
<ul>
<li>pattern</li>
<li>string</li>
<li>flag</li>
</ul>
</li>
<li><p>返回值：match对象的迭代器</p>
</li>
</ul>
<h2 id="re-split"><a href="#re-split" class="headerlink" title="re.split()"></a>re.split()</h2><ul>
<li><p>作用：把正则表达式匹配的字符串当作分割符，把原字符串分割成子串，返回分割得到子串的列表</p>
</li>
<li><p>参数</p>
<ul>
<li>pattern</li>
<li>string</li>
<li>maxsplit：可选参数，最大分割数</li>
<li>flag</li>
</ul>
</li>
<li><p>返回值：分割后得到的子串的list</p>
</li>
</ul>
<h2 id="re-sup"><a href="#re-sup" class="headerlink" title="re.sup()"></a>re.sup()</h2><ul>
<li><p>作用：替换正则表达式匹配到的子串，返回替换后的字符串</p>
</li>
<li><p>参数</p>
<ul>
<li>pattern</li>
<li>repl：替换字符串</li>
<li>string：待匹配和替换的原字符串</li>
<li>count：可选参数，最大替换次数</li>
<li>flag</li>
</ul>
</li>
<li><p>返回值：替换后的字符串</p>
</li>
</ul>
<h1 id="贪婪匹配与惰性匹配"><a href="#贪婪匹配与惰性匹配" class="headerlink" title="贪婪匹配与惰性匹配"></a>贪婪匹配与惰性匹配</h1><hr>
<p>当用 * 或 + 这种可代表不限量的特殊模式时，就出现了问题，对原字符串<code>1bc21ef2</code> ，用1开头，2结尾模式来匹配，结果可以是<code>1bc2</code>和<code>1ef2</code>,也可以是长串<code>1bc21df2</code>，前者情况称为惰性匹配，后者称为贪婪匹配</p>
<ul>
<li>贪婪匹配：用 <code>1.*2</code> 来代表，即 <code>.*</code> 或 <code>.+</code>  代表贪婪匹配</li>
<li>惰性匹配：用 <code>1.*?2</code> 来代表，即 <code>.*?</code> 或 <code>.+?</code> 代表惰性匹配</li>
</ul>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/01/12/cookiejar/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="忖度">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="c0x19">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/01/12/cookiejar/" itemprop="url">cookiejar</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2019-01-12T20:35:06+08:00">
                2019-01-12
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>cookiejar是http库的一个模块，其中有4个主要的类，CookieJar，FileCookieJar，MozillaCookieJar，LWPCookieJar</p>
<ul>
<li>CookieJar()：管理HTTP cookie值，是存储cookie的对象</li>
<li>FileCookieJar(filename, delayload=None, policy=None) : 由CooikeJar派生的，增加了将cookie与文件交互的功能</li>
<li>MozillaCookieJar(filename, delayload=None, policy=None)：由FileCookieJar派生的，创建与Mozilla浏览器 cookies.txt兼容的FileCookieJar实例</li>
<li>LWPCookieJar(filename, delayload=None, policy=None) : 由FileCookieJar派生的，创建与libwww-per标准的Set-Cookie3文件格式兼容的FileCookieJar实例</li>
</ul>
<p>大多情况只用CookieJar(), 如果需要和本地文件交互，就用MozillaCookieJar()或LWPCookieJar()</p>
<p>根据urllib的学习</p>
<ol>
<li>用urllib.request.urlopen()可以请求一个url链接，并可以加上data和tiemout</li>
<li>但1没法解决设置头部数据，这里就有了urllib.request.Request()，可以自己定义一个request对象，用这个可以设置头部和数据，然后用urllib.request.urlopen()来发送该对象</li>
</ol>
<p>如果要设置cookie呢，上面这些都无法完成</p>
<h1 id="CookieJar"><a href="#CookieJar" class="headerlink" title="CookieJar"></a>CookieJar</h1><hr>
<p>这里就用到了http库中的cookiejar，设置带cookie请求具体步骤如下</p>
<ol>
<li><p>创建一个存储cookie的cookiejar实例</p>
<p> <code>cookie = http.cookiejar.CookieJar()</code></p>
</li>
<li><p>创建对上面cookie实例的处理器</p>
<p> <code>handler = urllib.request.HTTPCookieProcessor(cookie)</code></p>
</li>
<li><p>创建关于该处理器的opener</p>
<p> <code>opener = urllib.request.build_opener(handler)</code></p>
</li>
</ol>
<p>opener是我们自己制定的一个和cookie关联的opener实例，以前用的urlopen也是一种opener实例，opener和以前的urlopen一样，可以打开url或者request对象，但完成了和cookie的关联</p>
<pre><code>import urllib.request
import urllib.error
import urllib.parse
import http.cookiejar

url = &apos;http://www.baidu.com&apos;
req = urllib.request.Request(url)
cookie = http.cookiejar.CookieJar()
handler = urllib.request.HTTPCookieProcessor(cookie)
opener = urllib.request.build_opener(handler)
try:
    rep = opener.open(req)
    print(req.get_method())
    print(rep.info())
    for item in cookie:
        print(&apos;name:&apos; + item.name)
        print(&apos;value:&apos; + item.value)
except urllib.error.URLError as e:
    print(e.reason)
</code></pre><h1 id="cookie与本地文件交互"><a href="#cookie与本地文件交互" class="headerlink" title="cookie与本地文件交互"></a>cookie与本地文件交互</h1><hr>
<p>可以用MozillaCookieJar或LWPCookieJar来把获取的cookie保存在文件中</p>
<h2 id="写入文件"><a href="#写入文件" class="headerlink" title="写入文件"></a>写入文件</h2><pre><code># 将cookie保存到文件中
import urllib.request
import urllib.error
import urllib.parse
import http.cookiejar

url = &apos;http://www.baidu.com&apos;
req = urllib.request.Request(url)
filename = &apos;cookie.txt&apos;  # 同目录的文件名，需要自己创建好，写入时会覆盖已有的数据
cookie = http.cookiejar.MozillaCookieJar(filename)
handler = urllib.request.HTTPCookieProcessor(cookie)
opener = urllib.request.build_opener(handler)
try:
    rep = opener.open(req)
    print(req.get_method())
    print(rep.info())
    for item in cookie:
        print(&apos;name:&apos; + item.name)
        print(&apos;value:&apos; + item.value)
    cookie.save(ignore_discard=True, ignore_expires=True)
    # discard表示即使cookies将被丢弃也将它保存下来，expires表示覆盖原文件写入
except urllib.error.URLError as e:
    print(e.reason)
</code></pre><h2 id="从文件中读取"><a href="#从文件中读取" class="headerlink" title="从文件中读取"></a>从文件中读取</h2><pre><code># 从文件中读取cookie
urllib.request
import urllib.error
import urllib.parse
import http.cookiejar

url = &apos;http://www.baidu.com&apos;
req = urllib.request.Request(url)
filename = &apos;cookie.txt&apos;
cookie = http.cookiejar.MozillaCookieJar()
cookie.load(filename, ignore_discard=True, ignore_expires=True)
handler = urllib.request.HTTPCookieProcessor(cookie)
opener = urllib.request.build_opener(handler)
try:
    rep = opener.open(req)
    print(rep.read().decode(&apos;utf-8&apos;))
except urllib.error.URLError as e:
    print(e.reason)
</code></pre>
          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/01/12/urllib/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="忖度">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="c0x19">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/01/12/urllib/" itemprop="url">urllib</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2019-01-12T17:59:58+08:00">
                2019-01-12
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>python2中的urllib和urllib2合在一起了，统一成python3中的urllib库，其中有4个模块：request、error、parse、robotparser</p>
<ul>
<li>request模块用来打开和读取url</li>
<li>error模块包括一些request产生的错误，用try来捕捉处理</li>
<li>parse模块用来解析url</li>
<li>robotparser模块用来解析robots.txt文件</li>
</ul>
<h1 id="request"><a href="#request" class="headerlink" title="request"></a>request</h1><hr>
<p>打开并读取URL，可以</p>
<ul>
<li>打开直接一个url链接，</li>
<li>也可以由自己制定一个request对象来打开</li>
</ul>
<h2 id="url-request-urlopen"><a href="#url-request-urlopen" class="headerlink" title="url.request.urlopen()"></a>url.request.urlopen()</h2><ul>
<li><p>作用：打开一个url请求， 并得到返回的响应</p>
</li>
<li><p>参数</p>
<ul>
<li>url : 网址链接</li>
<li>data ：post提交的参数，可以不写，默认为None，用字典存储，请求发送前要转换成bytes格式</li>
<li>timeout : 设置访问超时时间</li>
</ul>
</li>
</ul>
<ul>
<li><p>返回对象: HTTPResponse对象</p>
</li>
<li><p>返回对象提供的方法</p>
<ul>
<li>read() ：读取网页源代码，数据格式为bytes，需要用decode()转成str格式，类似还有readline(), readlines(), fileno(), close()</li>
<li>geturl() : 得到自己开始请求的url</li>
<li>getcode() : 得到http状态码，200代表成功</li>
<li>info() : 返回HTTPMessage对象，表示服务器响应返回的头信息</li>
</ul>
</li>
</ul>
<p>虽然可以发送请求，但不可以自己设置请求头部中的数据，urllib.request模块提供了Request()方法来自定义一个request请求对象，然后用上面的urllib.request.urlopen()来发送该request对象</p>
<h2 id="url-request-Request"><a href="#url-request-Request" class="headerlink" title="url.request.Request()"></a>url.request.Request()</h2><ul>
<li><p>作用：产生一个request对象，可以用上面的urlopen()来请求这个对象</p>
</li>
<li><p>参数</p>
<ul>
<li>url : 网址链接</li>
<li>data : post请求的参数,可以不写，默认为None，用字典存储，请求发送前要转换成bytes格式，也可以先不处理，然后在urlopen()时添加data</li>
<li>headers : 用字典来存储头部数据，默认为{}, 发送请求前不需要转换数据格式</li>
</ul>
</li>
<li><p>返回对象: HTTPRequest</p>
</li>
<li><p>返回对象提供的方法</p>
<ul>
<li>add_data(data) : 设置追加data</li>
<li>has_data() : 查看是否有了data参数</li>
<li>get_data() : 获取data参数的数据</li>
<li>add_header(key, value) : 添加头部信息，即按字典格式，key和value</li>
<li>get_full_url() : 获取请求的url</li>
<li>get_method() : 请求方法，一般返回GET或者POST</li>
<li>set_proxy(host, type) : 设置代理，第一参数是socket（ip：端口）,第二个参数是代理类型，http或https</li>
</ul>
</li>
</ul>
<p>创建好request对象后即可用urllib.request.urlopen()来请求发送</p>
<p>PS：data参数设置了即为post，没有设置即为get，get传递参数需要先把参数数据字典格式转成bytes然后追加到url上</p>
<h1 id="error"><a href="#error" class="headerlink" title="error"></a>error</h1><hr>
<h2 id="urllib-error-URLError"><a href="#urllib-error-URLError" class="headerlink" title="urllib.error.URLError"></a>urllib.error.URLError</h2><p>所有异常的基类，所有请求过程中的异常都可以被这个捕获到，通过reason属性来查看异常原因</p>
<pre><code>try:
    re = urllib.request.urlopen(&quot;http://www.baidu.com&quot;)
except urllib.error.URLError as e:
    print(e.reason)
</code></pre><h2 id="urllib-error-HTTPError"><a href="#urllib-error-HTTPError" class="headerlink" title="urllib.error.HTTPError"></a>urllib.error.HTTPError</h2><p>http错误，具体没搞清楚，反正用上面的基类URLError就好了</p>
<h1 id="parse"><a href="#parse" class="headerlink" title="parse"></a>parse</h1><hr>
<p>常用bytes和str的数据转换</p>
<p>data发送前，需要将字典str格式转成url的bytes格式</p>
<pre><code>data = urllib.parse.urlencode(data).encode(&apos;utf-8&apos;)
</code></pre><p>对于收到的HTTPResponse对象，读取的bytes格式要转成str</p>
<pre><code>re = re.read.decode(&apos;utf-8&apos;)
</code></pre><p>还有其他对url的处理,需要的时候再系统学吧</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/01/12/两台电脑共用博客/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="忖度">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="c0x19">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/01/12/两台电脑共用博客/" itemprop="url">两台电脑共用博客</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2019-01-12T02:07:35+08:00">
                2019-01-12
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>有了新电脑，想两台电脑能同时写博客，<br>参考：<a href="https://www.jianshu.com/p/0b1fccce74e0" target="_blank" rel="noopener">https://www.jianshu.com/p/0b1fccce74e0</a></p>
<p>具体配置参考了大佬的教程，注意原博客拷贝到新仓库时不要替换重命名文件，这里小记一下以后写博客时的命令</p>
<hr>
<p>每次要写文章的时候先pull一下，就是更新成最新仓库，让两个电脑同步</p>
<ul>
<li><code>git pull</code></li>
</ul>
<p>创建文章</p>
<ul>
<li><code>hexo new 文章</code>  </li>
</ul>
<p>在source里找到新建的文章，编写要写的内容，然后提交</p>
<ul>
<li><code>git add .</code></li>
<li><code>git commit -m &quot;操作&quot;</code></li>
<li><code>git push</code></li>
<li><code>hexo clean</code></li>
<li><code>hexo g</code></li>
<li><code>hexo d</code></li>
</ul>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
  </section>

  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/"><i class="fa fa-angle-left"></i></a><a class="page-number" href="/">1</a><span class="page-number current">2</span><a class="page-number" href="/page/3/">3</a><a class="extend next" rel="next" href="/page/3/"><i class="fa fa-angle-right"></i></a>
  </nav>



          </div>
          


          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      

      <section class="site-overview-wrap sidebar-panel sidebar-panel-active">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <p class="site-author-name" itemprop="name">忖度</p>
              <p class="site-description motion-element" itemprop="description">恭喜达拉斯独行侠队获得2020年NBA总冠军</p>
          </div>

          <nav class="site-state motion-element">

            
              <div class="site-state-item site-state-posts">
              
                <a href="/archives/">
              
                  <span class="site-state-item-count">23</span>
                  <span class="site-state-item-name">posts</span>
                </a>
              </div>
            

            

            
              
              
              <div class="site-state-item site-state-tags">
                
                  <span class="site-state-item-count">2</span>
                  <span class="site-state-item-name">tags</span>
                
              </div>
            

          </nav>

          

          

          
          

          
          

          

        </div>
      </section>

      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2019</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">忖度</span>

  
</div>


  <div class="powered-by">Powered by <a class="theme-link" target="_blank" href="https://hexo.io">Hexo</a></div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">Theme &mdash; <a class="theme-link" target="_blank" href="https://github.com/iissnan/hexo-theme-next">NexT.Muse</a> v5.1.4</div>




        







        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  












  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>
  

  
  
    <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.4"></script>



  
  

  

  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.4"></script>



  


  




	





  





  












  





  

  

  

  
  

  

  

  

</body>
</html>
