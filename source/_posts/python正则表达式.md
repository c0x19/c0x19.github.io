---
title: python正则表达式
date: 2019-01-13 22:55:11
tags:
---

python中正则表达式用re库

# pattern #
-----------------------------------------

pattern是正则中的模式字符串，代表了要匹配的规则

## 元字符 ##


|字符|含义|
|---|:--:|
|.|匹配任意一个字符，除了"\n"|
|\|转义字符，使后面的特殊字符变成普通字符，使普通字符变成特殊字符|
|*|匹配前一个字符0次或多次|
|+|匹配前一个字符1次或多次|
|?|匹配前一个字符0次或1次|
|^|匹配字符串开头，在多行模式中匹配每一行的开头|
|$|匹配字符串结尾，在多行模式下匹配每一行的结尾|
|<code>&#124;</code>| 匹配左右表达式中的任意一个|
|{}|{m}匹配前一个字符m次，{m,n}匹配前一个字符m到n次，n不写代表无限次|
|[]|匹配字符集中的任意一个字符，[abc]即abc中任意一个，[a-z]即a-z  26个字母中任意一个，[^abc]代表所有字符中除去abc的任意一个字符|
|()|分组，里面是一个整体pattern，和算术中()一样优先处理，然后结果返回出来，从左开始数（按左括号计数）编号为1|

## 预定义字符集 ##

|字符|含义|
|---|:--:|
|\d|数字|
|\D|非数字|
|\s|空白字符|
|\S|非空白字符|
|\w|包括下划线在内的任何字符|
|\W|特殊字符，即非字母字符|
|\A|仅匹配字符串开头，同^|
|\z|仅匹配字符串结尾，同$|
|\b|匹配位于单词开始或结束位置的空字符串|
|\数字|匹配索引对应分组捕获到的内容一样的字符串|

# 标志 #
---
在调用函数时，有个可选的参数flag，代表了一些规则

|标志|含义|
|---|:---:|
|re.I|使匹配忽略大小写|
|re.S|使.匹配包括"\n"在内的所有字符|
|re.M|多行匹配，影响^和$|


# re库中的函数 #
---

## re.compile() ##

- 作用：预编译正则表达式pattern，返回一个正则表达式对象，当多次使用该表达式时，这样可以提高性能
- 参数
	- pattern：正则表达式
	- flag：可选参数


- 返回对象：正则表达式对象
- 返回对象的方法：下面介绍的所有函数都可以被该对象调用，调用时函数中的pattern参数就不用写了



## re.match() ##

- 作用：从字符串最开始与pattern匹配，开始不匹配直接失败，返回None，成功返回匹配对象，是一个match对象

- 参数
	- pattern：正则表达式，可以是字符串，也可以是re.compile()产生的正则表达式对象
	- string：待匹配的字符串
	- flag：可选参数


- 返回值：match对象

- match对象的属性
	- match对象自带布尔值，表示匹配成功与否
	- string：待匹配的文本
	- re：匹配时使用的pattern对象，即正则表达式
	- pos：正则表达式搜索文本的开始位置
	- endpos：正则表达式搜索文本的结束文章

- match对象的方法
	- group(num=0)：返回match对象中匹配到的字符串结果，参数默认是0，即返回全部字符串，也可加入数字，返回匹配pattern中的对应分组结果的字符串
	- groups(default=None)：返回包含所有匹配子组的元组
	- start()：返回匹配结果在查找字符串中开始的位置
	- end()：返回匹配结果在查找字符串中结束的位置
	- span()：返回一个位置元组(开始，结束)，即上面两个函数形成一个元组


## re.search() ##

- 作用：与match()只从头匹配不同，是从任意位置查找第一次匹配的内容，失败返回None，成功返回一个match对象

- 参数
	- pattern：正则表达式
	- string：待匹配的字符串
	- flag：可选参数

- 返回值：match对象,该对象参考match()函数介绍

## re.findall() ##

- 作用：查找所有(非重复)匹配正则表达式的结果

- 参数
	- pattern：正则表达式
	- string：待匹配的字符串
	- flag：可选参数

- 返回值：一个包括所有匹配字符串结果的list

## re.finditer() ##

- 作用：搜索字符串，返回一个匹配结果的迭代器，每个元素是match对象，即相当于search()函数不停执行，把每次得到的match对象合起来返回一个迭代器

- 参数
	- pattern
	- string
	- flag

- 返回值：match对象的迭代器


## re.split() ##

- 作用：把正则表达式匹配的字符串当作分割符，把原字符串分割成子串，返回分割得到子串的列表

- 参数
	- pattern
	- string
	- maxsplit：可选参数，最大分割数
	- flag

- 返回值：分割后得到的子串的list


## re.sup() ##

- 作用：替换正则表达式匹配到的子串，返回替换后的字符串

- 参数
	- pattern
	- repl：替换字符串
	- string：待匹配和替换的原字符串
	- count：可选参数，最大替换次数
	- flag

- 返回值：替换后的字符串



# 贪婪匹配与惰性匹配 #
---
当用 * 或 + 这种可代表不限量的特殊模式时，就出现了问题，对原字符串`1bc21ef2` ，用1开头，2结尾模式来匹配，结果可以是`1bc2`和`1ef2`,也可以是长串`1bc21df2`，前者情况称为惰性匹配，后者称为贪婪匹配

- 贪婪匹配：用 `1.*2` 来代表，即 `.*` 或 `.+`  代表贪婪匹配
- 惰性匹配：用 `1.*?2` 来代表，即 `.*?` 或 `.+?` 代表惰性匹配


