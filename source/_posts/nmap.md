---
title: nmap
date: 2019-03-28 23:11:52
tags:
---

namp嗅探扫描神器，渗透必备，下面通过渗透过程来介绍nmap常用的用法

# 发现主机 #

通过扫描整个子网来发现主机，所以要先找到子网的IP段

windows：`ipconfig`

linux： `ifconfig`

可以查看本机的IP地址、网关的IP地址、子网掩码

通过子网掩码可以知道IP地址前缀，如255.255.255.0即为24，若网关IP为192.168.1.1，则**扫描整个子网**命令：

`nmap 192.168.1.1/24`

也可以**扫描指定的主机**

- `nmap 192.168.1.101`
- `nmap 192.168.101 192.168.1.102`
- `namp 192.168.1.100-200`
- `nmap -iL target.txt` （targe.txt存储IP地址列表）

主机发现也叫做ping扫描，但不只是简单的发送ICMP回声请求报文，可以指定参数`-P<C>`来选择ping的类型(即使指定ping类型，ARP发现-PR对局域网还是默认有的，因为又快又有效)

**控制主机发现的参数：**

- -sL(列表扫描)：仅仅列出指定网络上的主机，不发送报文

- -sP(ping扫描)：仅仅进行ping扫描，打印出回应的主机

- -P0(无ping)：nmap默认只对运行的主机进行扫描，-P0会对每一个指定的IP地址进行扫描

- -PS(TCP SYN Ping)：发送设置了SYN标志位的空TCP报文

- -PA(TCP ACK Ping)：设置ACK位

- -PU(UDP Ping)：发送UDP报文，可以穿过只对TCP过滤的防火墙

- -PR(ARP Ping)：**默认用的扫描方式**，局域网好用就完事了

# 扫描端口 #

发现要扫描的主机后，可以针对单个主机进行扫描,端口扫描格式为`namp -s<C>`

- -sS(TCP SYN扫描)：半开放扫描，发送SYN报文，不容易被注意到，是**默认扫描方式**

- -sT(TCP connect()扫描)：全连接扫描，仅当SYN不行时使用一下，慢

- -sU(UDP扫描)：扫描UDP服务，较慢，可以搭配TCP扫描一起用

- -sA(TCP ACK扫描)：不发现端口情况，用于发现防火墙规则

- -scanflags(定制TCP扫描)：定制报文标志位，巧妙绕过入侵检测

- -sI：高级扫描，盲扫描，没有报文从自己的真实IP发送，机端隐蔽！


# 服务和版本探测 #

`-sV`参数用来版本探测，其他暂时不学

# 操作系统探测 #

`-O` 启用操作系统检测(大写英文字母O)

# 输出 #

- -oN：标准输出，后接文件名
- -oX：XML输出

# 其他参数 #

- -v：显示扫描过程细节
- -T4：时间选项，T后面接数字，默认是T3，T4可以更快

# 究极扫描! #

`nmap -A`

全面扫描，包括-O和-sV，忘记参数或者不懂的时候-A就完事了